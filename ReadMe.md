# CSV DataLog Program

### **Project Description**

This project is designed to clean CSV log files generated by Siemens HMI systems, particularly for testing and monitoring PLCs. The program ensures that logs are uniformly structured and accessible for visualization in tools like Grafana. It automates the process of reading raw log files, cleaning them by removing unnecessary data (e.g., `$RT_COUNT$` entries), and serving the cleaned logs via a local server.

This project was developed during my internship at **Premier Tech**, where I used it to streamline the testing and data monitoring of PLCs and HMIs.

---

## **Installation Guide**

### 1. Extract the ZIP File or Clone into the Desired Directory

After downloading and extracting the ZIP file or cloning the repository, you'll find the following structure. Follow the steps below to set everything up properly.

### 2. Download and Install Python 3.12

1. **Open the "Python_download.url" File**:
   - This will open your default browser and take you to the Python website to download **Python 3.12**.

2. **Install Python 3.12**:
   - Run the downloaded installer.
   - **Important**: During installation, make sure to check the box that says **"Add Python to PATH"** to ensure Python and `pip` are available from the command line.

3. **Verify Installation**:
   - Open **Command Prompt** (press `Win + R`, type `cmd`, and hit Enter).
   - Type the following commands to ensure Python and `pip` are installed correctly:

     ```bash
     python --version
     pip --version
     ```

   If either command doesn't work, follow the steps below to manually add Python and `pip` to your PATH.

---

### 3. Manually Add Python and pip to PATH (if needed)

1. **Find the Installation Directory**:
   - Navigate to the Python installation folder, typically located at:
     - `C:\Users\<YourUsername>\AppData\Local\Programs\Python\Python312\`

2. **Open Environment Variables**:
   - Right-click on **This PC** (or **Computer**) and select **Properties**.
   - On the left side, click **Advanced system settings**.
   - In the new window, click **Environment Variables**.

3. **Edit the PATH Variable**:
   - In the **System Variables** section, scroll down and find the **Path** variable, then click **Edit**.
   - Click **New** and add the following paths (adjust for your Python version):

     - `C:\Users\<YourUsername>\AppData\Local\Programs\Python\Python312\`
     - `C:\Users\<YourUsername>\AppData\Local\Programs\Python\Python312\Scripts\`

4. **Apply and Test**:
   - Click **OK** to save your changes.
   - Open a new **Command Prompt** and test:

     ```bash
     python --version
     pip --version
     ```

---

### 4. Set Up the Project Environment

1. **Run "install.bat"**:
   - Locate and run the **install.bat** file in the `installation/` folder.
   - This script will:
     - **Create a virtual environment** using Python's `venv` tool.
     - **Install all required dependencies** from the `requirements.txt` file.

   Make sure that the process completes without errors.

---

### 5. Running the Program

1. **Run "Main.py"**:
   - Once everything is set up, run the main program by executing **"Main.py"**.
   - This will start the program and:
     - Host the cleaned log directory at `http://localhost:8000`.
     - Automatically clean log files placed in the `logs/original/` directory.

         **Directory Not Found Error**:
      - If you run `Main.py` for the first time and receive an error about missing log directories, it may be because the `logs/cleaned/` directory hasn't been created yet. Simply close and restart the `main.py` program, which should resolve the issue.

2. **Access the Hosted Directory**:
   - Open a web browser and go to `http://localhost:8000`.
   - From here, you can access and download files, including cleaned log files, from any machine on your network.

---

### 6. Organizing the Log Files

1. **Place Log Files in the Correct Directory**:
   - Place raw log files from the HMI into the `logs/original/` folder.
   - The program will automatically clean these files and output the cleaned logs in the `logs/cleaned/` folder.

      (Both the in and output directory can be changed in `config/config.json`)

---

### 7. Using Grafana with the Program

1. **Configure Grafana to Access Logs**:
   - In Grafana, set up a **data source** that points to the hosted files at `http://localhost:8000`.
   - Use this URL to access cleaned log files and visualize data directly in Grafana.

---

### 8. Updating the Program

1. **Run "update.bat"**:
   - If you want to pull updates and ensure all dependencies are up-to-date, simply run the `update.bat` script located in the `installation/` directory.

---

## **Directory Structure**

```plaintext
CSVDataLogProgram/
├── .venv/                 # Virtual environment for Python packages
├── config/
│   └── config.json        # Configuration settings
├── installation/
│   ├── install.bat        # Script to set up the environment
│   ├── update.bat         # Script to update the environment
│   ├── Python_download.url # URL to download Python
│   └── requirements.txt   # List of Python dependencies
├── logs/
│   ├── cleaned/           # Directory for cleaned log files
│   └── original/          # Directory for raw log files
├── src/
│   ├── cleaner.py         # Script for cleaning log files
│   └── file_host.py       # Script for hosting files over localhost
├── main.py                # Main script to start the program
└── README.md              # This file
